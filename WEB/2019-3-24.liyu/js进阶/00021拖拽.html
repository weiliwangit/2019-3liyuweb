<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽</title>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;

		}
	</style>
</head>
<body>
	
</body>
<script type="text/javascript">
	function Tuozhuai(options){
		this.oBox=null;
		this.width=options.width;
		this.height=options.height;
		this.background=options.background;
        this.disX=0;
        this.disY=0;

		this.init();

        this.bindEvent();
	}
	Tuozhuai.prototype.init=function(){
		this.oBox=document.createElement("div");
		
		this.oBox.style.width=this.width+"px";
		this.oBox.style.height=this.height+"px";
		this.oBox.style.background=this.background;
		this.oBox.style.position = "absolute";
		this.oBox.style.top=0;
		this.oBox.style.left=0;
		document.body.appendChild(this.oBox);
	}
	Tuozhuai.prototype.bindEvent=function(){
		// console.log(this)
		// var _this=this;
		this.oBox.onmousedown=function(ev){
		    var oEvent=ev||event;
		    // console.log(this)
		    this.disX=oEvent.clientX-this.oBox.offsetLeft;
		    this.disY=oEvent.clientY-this.oBox.offsetTop;
		    document.onmousemove=function(ev){
			    var oEvent=ev||event;
			    console.log(this)
			    this.oBox.style.left=oEvent.clientX-this.disX+"px";
			    this.oBox.style.top=oEvent.clientY-this.disY+"px";	
		    }.bind(this);	
		    document.onmouseup=function(ev){
				document.onmousemove=null;
				document.onmouseup=null;
		    };	
		}.bind(this);

		

	}
	new Tuozhuai({
		width:100,
		height:100,
		background:"red"
	});

</script>
</html>